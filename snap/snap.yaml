apps:
  postgresql:
    command: bin/service.postgresql.sh start
    stop-command: bin/service.postgresql.sh stop
    daemon: forking
    start-timeout: 600s
    plugs:
    - network
    - network-bind
    restart-condition: always
    before: [redis]
  redis:
    command: bin/service.redis.sh start
    daemon: simple
    plugs:
    - network
    - network-bind
    restart-condition: always
    before: [sidekiq]
  sidekiq:
    command: bin/service.sidekiq.sh start
    daemon: simple
    plugs:
    - network
    - network-bind
    restart-condition: always
    before: [unicorn]
  unicorn:
    command: bin/service.unicorn.sh start
    daemon: forking
    start-timeout: 600s
    plugs:
    - network
    - network-bind
    restart-condition: always
    before: [nginx]
  nginx:
    command: bin/service.nginx.sh start
    daemon: forking
    plugs:
    - network
    - network-bind
    restart-condition: always
    stop-command: bin/service.nginx.sh stop
    reload-command: bin/service.nginx.sh reload

confinement: strict
description: Diaspora
grade: stable
name: diaspora
summary: Diaspora
